<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"
"http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
<!--
       '$RCSfile: eml-210info.xml,v $'
       Copyright: 1997-2002 Regents of the University of California,
                            University of New Mexico, and
                            Arizona State University
        Sponsors: National Center for Ecological Analysis and Synthesis and
                  Partnership for Interdisciplinary Studies of Coastal Oceans,
                     University of California Santa Barbara
                  Long-Term Ecological Research Network Office,
                     University of New Mexico
                  Center for Environmental Studies, Arizona State University
   Other funding: National Science Foundation (see README for details)
                  The David and Lucile Packard Foundation
     For Details: http://knb.ecoinformatics.org/

        '$Author: obrien $'
          '$Date: 2008-11-24 02:33:03 $'
      '$Revision: 1.2 $'

    This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
-->
<article class="faq">
  <title>Changes and New Features in EML 2.1.0 </title>
  <para/>
  <para>
    <ulink url="./index.html">Back to EML Contents</ulink>
  </para>
  <para>
    <ulink url="./eml-faq.html">Back to EML FAQs</ulink>
  </para>
  <para>
  Several changes to EML 2.1.0 will require changes to instance documents.
  These should be noted by EML instance authors when creating new metadata
  documents. The XSL style sheet which accompanies the release will perform
  these necessary changes, and convert existing EML 2.0.1 documents to valid 
  EML 2.1.0.
</para>
  <para>
   The EML2.1.0 release addresses bugs which caused the schema to be invalid 
   with respect to  W3C specifications  (http://www.w3.org/2001/03/webdata/xsv). 
   Although the changes were small, one was incompatible with EML 2.0 releases, 
   which necessitated advancing     the version number to "2.1".
     The STMML schema was also found to be invalid with respect to XML Schema
     language, and the most reasonable fix for this bug also was incompatible
     with earlier versions. Authors should note that the schema error was NOT
     related to elements used directly by EML (i.e., unitList or unitType).  
     However, EML imports all of STMML, and authors of EML instance documents 
     may have made use of other parts of the STMML schema. Therefore,
      it was decided to the advance the namespace used for 
     stmml-related imports to "stmml-1.1", in keeping with the pattern of
     version      naming in EML. The STMML authors have been contacted, and 
     are interested in our            changes.  </para>
  <para>
     Other features and enhancements were added to this release, and represent 
     significan improvements. Several elements were retyped, in some cases to
     constrain      their content, and in other cases to make it more flexible.
     The names of two elements      were changed make them consistent throughout
     EML. The cardinality of two elements      in the literature schema were
     allowed to be optional so that EML could accomodate      articles-in-press.
     An optional "contact tree" was also added to the literature schema.
     </para>
  <para>
  </para>
  <qandaset>
    <qandaentry id="id.1">
      <question>
        <para>EML Schema validity</para>
      </question>
      <answer>
        <para>In the EML 2.0 series, the content model for additionalMetadata  
     included an element &lt;describes&gt; which was optional, and could be 
     included multiple times, alongside any other XML content. 
     This construct is not allowed in XML Schema. In EML 2.1, a
      child element has been       added to the additionalMetadata section to
      contain the "&lt;xs:any&gt; XML";      content. Instance documents written
      against 2.1.0 will differ from 2.0.1 documents in the following
      ways:</para>
        <para>&lt;additionalMetadata&gt; sections now must include a child
	&lt;metadata&gt; to contain the additional xml.  In EML 2.0.1, an 
	additionalMetadata section looked like this:
				<programlisting>
<![CDATA[...
 <additionalMetadata>
  <unitList>
   <unit name="speciesPerSquareMeter" 
         unitType="arealDensity" 
	 id="speciesPerSquareMeter" 
	 parentSI="numberPerSquareMeter" 
	 multiplierToSI="1"/>
  </unitList>
 </additionalMetadata>...]]>
 </programlisting>
        </para>
        <para>
			In EML 2.1.0, the markup must be wrapped in &lt;metadata&gt; tags:
      <programlisting>
      <![CDATA[
...
<additionalMetadata>
 <metadata>
  <unitList>
   <unit name="speciesPerSquareMeter" 
         unitType="arealDensity" 
         id="speciesPerSquareMeter" 
         parentSI="numberPerSquareMeter" 
         multiplierToSI="1"/>
  </unitList>
 </metadata>
</additionalMetadata>
...
        ]]>
        </programlisting>
        </para>
        <para>The optional &lt;describes&gt; element may still be included to
	reference a particular node of the document.  Multiple 
	&lt;describes&gt; elements can be included if needed.      	
	</para>
      </answer>
    </qandaentry>
    <qandaentry id="id.2">
      <question>
        <para>STMML Schema validity</para>
      </question>
      <answer>
        <para>EML makes use of the Scientific Technical and Medical Markup
	Language schema (stmml.xsd) for describing
	units. The STMML schema was also found to be invalid, and the
	repair was not compatible with earlier STMML documents. This error
	was not related to elements used directly by EML (i.e., unitList or
	unitType). However some authors may have used of other parts of
	stmml.xsd in their documents.  It was decided to the advance the
	namespace used for stmml-related files to "stmml-1.1". We are working
	with the STMML developers on this issue. To import stmml.xsd into one of
	your EML-2.1.0 documents see the XML namespace declaration for stmml in
	the code below:
		<programlisting><![CDATA[
<?xml version="1.0"?>
<eml:eml
 packageId="eml.1.1" system="knb"
 xmlns:eml="eml://ecoinformatics.org/eml-2.1.0"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:stmml="http://www.xml-cml.org/schema/stmml-1.1"
 xsi:schemaLocation="eml://ecoinformatics.org/eml-2.1.0 eml.xsd">
 <dataset>
	...
 </dataset>
 <additionalMetadata>
  <metadata>
   <stmml:unitList xmlns:stmml="http://www.xml-cml.org/schema/stmml-1.1"
    xsi:schemaLocation="http://www.xml-cml.org/schema/stmml-1.1 stmml.xsd">
    <stmml:unit name="gramsPerSquareMeter" 
                unitType="arealMassDensity" 
                id="gramsPerSquareMeter" 
                parentSI="kilogramsPerSquareMeter" 
                multiplierToSI=".001">			
     ..
   </stmml:unitList>
  </metadata>
 </additionalMetadata>
</eml:eml>
		]]></programlisting>
        </para>
      </answer>
    </qandaentry>
    <qandaentry id="id.3">
      <question>
        <para>Location of Access Control Trees</para>
      </question>
      <answer>
        <para>In EML 2.0.1 access to the metadata was controlled by an access 
        tree that was a child of each top-level module: dataset,
	citation,software,  or protocol. Additionally, authors could have put
	access trees into additonalMetadata sections with a &lt;describes&gt;
	element referencing the distribution node to which the access tree
	applied. This practice might have implied that access rules could be
	applied to any node. In reality however, node-level access control is
	too problematic to implement, and only access trees  that referenced
	data entity distribution nodes were recognized (as was stated in
	EML2.0.1 documentation).  A better solution is to locate access trees
	above or near the node whose access it controls.</para>
        <para> In EML 2.1.0,  access trees can be placed in 2 places. To 
	control the entire metadata document, place an &lt;access&gt; tree as 
	a child of the root element. If a metadata author wishes to override 
	the document-level control for a specific entity, an additional access
	tree may be placed as child of a &lt;distributioin&gt; element within
	the &lt;physical&gt; tree of that entity.</para>
        <para>To control access to all the metadata and by default to the data,
	use an &lt;access&gt; element at the top level:
        <programlisting>
        <![CDATA[
<eml:eml>
 <access>
  ...
 <access>
 <dataset>
   ...
 </dataset>
 <additionalMetadata>
   ...
 </additionalMetadata>
</eml:eml>  
      	]]>
      	</programlisting>
        </para>
        <para>Access rules can still be specified for any data entity by 
	placing an access tree under that entity's physical/distribution
	element. The following example shows a dataTable's access tree that may
	overrides permissions set at the document level. If no access is
	specified in distribution then /eml/access rules are applied.  </para>
        <programlisting><![CDATA[
<eml:eml>
 <dataset>
  ...
 <dataTable>
   ...
  <physical>
    ...
   <distribution>
    ...
    <access>
     ...
    </access>
   </distribution>
  </physical>
   ...
  </dataTable>
 </dataset>
</eml:eml>
       ]]></programlisting>
        <para>		</para>
      </answer>
    </qandaentry>
    <qandaentry id="id.4">
      <question>
        <para>Typing of gRing</para>
      </question>
      <answer>
        <para>The content of the element gRing was retyped, making these 
        nodes more usable. This element is generally analogous to the FGDC
	component for ring. Markup should be a string comprised of a sequence 
	of lon-lat pairs, as in: 
	<programlisting>
<![CDATA[
..
 <gRing>-119.453,35.0 -125,37.5555 -122,40 -119.453,35.0 </gRing>
..
]]>
	</programlisting>
       </para>
      </answer>
    </qandaentry>
    <qandaentry id="id.5">
      <question>
        <para>attribute.xsd:  bounds/minimum and bounds/maximum are of
	type xs:float</para>
      </question>
      <answer>
        <para/>
        <para/>
<programlisting>
<![CDATA[
...
<attribute>
 ...
 <bounds>
  <minimum>0</minimum>
  <maximum>120</maximum>
</bounds>
...
]]>
   </programlisting>        
 </answer>
    </qandaentry>
    <qandaentry id="id.6">
      <question>
        <para>coverage.xsd: of geographicCoverage/*/altitudeUnits use
	standardUnits of LengthType</para>
      </question>
      <answer>
        <para>In EML-2.0.1, altitude units were typed as a string, and the
	authors told to include a vertical datum
        with the unit. In EML-2.1.0, this has been revised. Altitudes are now
	limited to Standard Units 
        which are lengths (meter, foot, etc), and the datum should be placed in
	the geographicDescription.  
<programlisting>
<![CDATA[
..
<boundingCoordinates>
 ...
 <boundngAltitudes>
  <altitudeMinimum>0</altitudeMinimum>
  <altitudeMaximum>120</altitudeMaximum>
  <altitudeUnits>meter</altitudeUnits>
</boundingCoordinates>
..
]]>
	</programlisting>        
	</para>
       </answer>
    </qandaentry>
    <qandaentry id="id.7">
      <question>
        <para>coverage.xsd: latitude and longitide are type xs:decimal, with
	appropriate ranges</para>
      </question>
        <answer>
        <para>In EML-2.0.1, latitude and longitude were typed as a string. In
	EML-2.1.0, these have been restricted  to decimal number with realistic
	ranges for each (-90 to 90 and 180 to 180, respectively). Fractions of 
	a degree in minutes and seconds should be converted to degree 
	fractions, and srings denoting direction or hemisphere (e.g., 'S' or
	'south') are not allowed. Latitudes north of the equator must be
	specified by a plus sign (+), or by the absence of a minus sign (-), 
	and latitudes south of the equator should be prefixed with minus sign
	(-).These constraints are consistent with the intended use of this
        field: to provide general mapping of EML resources. Authors should 
	keep in mind that very specific descriptions of spatial data can be
	described by modules dedicated to that purpose.
<programlisting>
<![CDATA[
..
<boundingCoordinates>
 <westBoundingCoordinate>-120.2534</westBoundingCoordinate>
 <eastBoundingCoordinate>-119.7550</eastBoundingCoordinate>
 <northBoundingCoordinate>34.2231</northBoundingCoordinate>
 <southBoundingCoordinate>34.1231</southBoundingCoordinate>
</boundingCoordinates>
..
]]>
	</programlisting>        
	</para>
       </answer>
    </qandaentry>
    <qandaentry id="id.8">
      <question>
        <para>Typing of strings to NonEmptyStrings </para>
      </question>
        <answer>
        <para>In EML-2.0.1, strings were allowed to be empty, even for required
	elements. In EML-2.1.0, elements are required to have minimal content.
	Where as this would be allowed in EML 2.0.1:
<programlisting>
<![CDATA[
...
<distribution>
 <offline>
  <mediumName>my medium</mediumName>
 </offline>
</distribution>
...
]]>
	</programlisting>
        </para>
        <para>In EML 2.1.0, empty (or whitespace) content is not allowed.
        <programlisting>
<![CDATA[
...
<distribution>
 <offline>
  <mediumName>my medium</mediumName>
 </offline>
</distribution>
...
]]>
	</programlisting>        
        </para>
       </answer>
    </qandaentry>
    <qandaentry id="id.9">
      <question>
        <para>offline/mediumName</para>
      </question>
      <answer>
        <para>In EML-2.0.1, an author could describe an offline data resource,
	but include no information about the resource's distribution. In
	EML-2.1.0, minimal content (one element) is now required.  
	</para>
        <para>	In EML 2.1.0, the element mediumName is required:</para>
        <programlisting>
<![CDATA[
...
<distribution>
 <offline>
  <mediumName>my medium</mediumName>
 </offline>
</distribution>
...
]]>
	</programlisting>
      </answer>
    </qandaentry>
    <qandaentry id="id.10">
      <question>
        <para>method is now methods</para>
      </question>
       <answer>
        <para>In EML-2.0.1, elements named both "method" and "methods" were
	used,which caused confusion for some authors. In EML 2.1.0, instances 
	of the MethodsType have been standarized to "methods".   </para>
        <para>In EML 2.0.1, this path existed:
        <programlisting><![CDATA[
...
/eml/__________________________________________________/method/
...
]]>
	</programlisting>
        </para>
        <para>In EML 2.1.0, this path is now properly constructed as:
        <programlisting>
<![CDATA[
...
/eml/__________________________________________________/methods/
...
]]>
</programlisting>
        </para>
      </answer>
    </qandaentry>
    <qandaentry id="id.11">
      <question>
        <para>datetime is now dateTime</para>
      </question>
      <answer>
       <para>In EML-2.0.1, elements named both "datetime" and "dateTime" were
       used, which caused confusion for some authors. In EML 2.1.0, instances 
       of the MethodsType have been standarized to "dateTime".   
       </para>
        <para>In EML 2.0.1, this path existed:
        <programlisting>
	<![CDATA[
...
/eml/__________________________________________________/datetime/
...
]]>
</programlisting>
        </para>
        <para>In EML 2.1.0, this path is now properly constructed as:
        <programlisting><![CDATA[
...
/eml/__________________________________________________/dateTime/
...
]]>
</programlisting>
        </para>
      </answer>
    </qandaentry>
    <qandaentry id="id.12">
      <question>
        <para>literature, volume and pageRange are optional</para>
      </question>
      <answer>
        <para>3. Two elements (volume and pageRange) describing citations
	(eml-literature.xsd) are now optional so that articles-in-press can be
	described with EML.</para>
      </answer>
    </qandaentry>
    <qandaentry id="id.13">
      <question>
        <para>literature has contact tree</para>
      </question>
      <answer>
        <para>so that an author onther than the first can be designated as the
	contact author for the publication, for example in reprint requests or
	inquiries for more information.
          <programlisting/>
        </para>
      </answer>
    </qandaentry>
    <qandaentry id="id.14">
      <question>
        <para>new element &lt;onlineDescription&gt; for a description of a URL</para>
      </question>
      <answer>
        <para>The new element, &lt;onlineDescription&gt;, can hold a brief
	description of the content of the online element's 
	online|offline|inline child. This description element could supply
	content for an html anchor tag. 
          <programlisting/>
        </para>
      </answer>
    </qandaentry>
  </qandaset>
</article>
